!function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b,c,d){return this.jsonMode?/^[\[,{]$/.test(b)||/^}/.test(c):";"==b&&d.lexical&&")"==d.lexical.type?!1:/^[;{}]$/.test(b)&&!/^;/.test(c)}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(a,b,c){return"tag"==a&&/>$/.test(b)||/^</.test(c)}}),CodeMirror.defineExtension("commentRange",function(a,b,c){var d=this,e=CodeMirror.innerMode(d.getMode(),d.getTokenAt(b).state).mode;d.operation(function(){if(a)d.replaceRange(e.commentEnd,c),d.replaceRange(e.commentStart,b),b.line==c.line&&b.ch==c.ch&&d.setCursor(b.line,b.ch+e.commentStart.length);else{var f=d.getRange(b,c),g=f.indexOf(e.commentStart),h=f.lastIndexOf(e.commentEnd);g>-1&&h>-1&&h>g&&(f=f.substr(0,g)+f.substring(g+e.commentStart.length,h)+f.substr(h+e.commentEnd.length)),d.replaceRange(f,b,c)}})}),CodeMirror.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(a,b){function c(){i+="\n",k=!0,++j}for(var d=this,e=d.getMode(),f=d.getRange(a,b).split("\n"),g=CodeMirror.copyState(e,d.getTokenAt(a).state),h=d.getOption("tabSize"),i="",j=0,k=0==a.ch,l=0;l<f.length;++l){for(var m=new CodeMirror.StringStream(f[l],h);!m.eol();){var n=CodeMirror.innerMode(e,g),o=e.token(m,g),p=m.current();m.start=m.pos,(!k||/\S/.test(p))&&(i+=p,k=!1),!k&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(o,p,m.string.slice(m.pos)||f[l+1]||"",n.state)&&c()}!m.pos&&e.blankLine&&e.blankLine(g),k||c()}d.operation(function(){d.replaceRange(i,a,b);for(var c=a.line+1,e=a.line+j;e>=c;++c)d.indentLine(c,"smart");d.setSelection(a,d.getCursor(!1))})})}();